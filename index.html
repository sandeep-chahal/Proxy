<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link rel="apple-touch-icon" href="icon.png" />
		<!-- <link rel="manifest" href="manifest.json" /> -->
		<link rel="share-target" href="/" />

		<title>SandsProxy</title>
	</head>
	<body>
		<a href="/youtube">Go YT Home Page!</a>
		<h1>Search</h1>
		<input type="text" placeholder="Enter url or search videos" />
		<button onclick="search()">Go!</button>
		<script>
			navigator.share.addEventListener("share", (event) => {
				const url = event.data.url;
				parseURL(url);
			});
			function search() {
				const value = document.querySelector("input").value;
				parseURL(value);
			}

			function parseURL(value) {
				if (value.startsWith("http")) {
					const videoId = value.split("v=")[1].split("&")[0];
					// alert(videoId);
					document.location.replace("/watch?v=" + videoId);
				} else document.location.replace("/yt_search?q=" + value);
			}
		</script>
	</body>
</html>
